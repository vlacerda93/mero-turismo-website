// ===== Traduções PT/EN =====

const translations = {
  pt: {
    nav_home: "Início",
    nav_tours: "Passeio",
    nav_gallery: "Galeria",
    nav_about: "Sobre",
    nav_contact: "Contato",

    hero_title: "Bem-vindo à Agência de Turismo MERO",
    hero_subtitle:
    hero_cta: "Conheça o Passeio Panorâmico",

    tours_title: "Passeio Panorâmico pela Costa",
    tours_subtitle:
      "Um roteiro único pela costa de Angra dos Reis, ideal para famílias, grupos de amigos e eventos especiais, com navegação tranquila, paisagens naturais e paradas perfeitas para fotos e banho de mar.",

    tour1_title: "Passeio Panorâmico pela Costa",
    tour1_duration: "Duração: 5h",
    tour1_schedule: "Saídas pela manhã ou à tarde",
    tour1_capacity: "Capacidade: até 89 pessoas",
    tour1_description:
      "Navegação tranquila pela costa, com vistas privilegiadas das enseadas, ilhas e praias da região, em um passeio pensado para quem quer relaxar, tirar fotos e aproveitar o mar com segurança.",
    tour1_stops_title: "Paradas principais",
    tour1_stop1:
      "Enseadas e praias selecionadas de acordo com o clima e as condições do dia.",
    tour1_stop2:
      "Pontos estratégicos para banho de mar em águas calmas e agradáveis.",
    tour1_stop3:
      "Momentos para fotos do barco, da paisagem e do grupo durante o passeio.",
    tour1_included_title: "Incluído no passeio",
    tour1_included1: "Embarcação com tripulação experiente.",
    tour1_included2: "Combustível para todo o trajeto.",
    tour1_included3: "Equipamentos de segurança a bordo.",
    tour1_not_included_title: "Não incluído",
    tour1_not_included1: "Alimentação.",
    tour1_not_included2: "Bebidas alcoólicas.",
    tour1_price:
      "Valores sob consulta · Fale com a equipe MERO para receber uma proposta para o seu grupo.",

    gallery_title: "Galeria de Momentos",
    gallery_subtitle:
      "Conheça um pouco do visual do passeio e do Barco Mero em ação.",
    gallery_item1: "Barco Mero em navegação",
    gallery_item2: "Parada para fotos e banho",
    gallery_item3: "Grupos e famílias a bordo",
    gallery_item4: "Pôr do sol na baía",
    gallery_item5: "Praias e enseadas da região",
    gallery_item6: "Detalhes do Barco Mero",

    about_title: "Sobre a Agência de Turismo MERO",
    about_p1:
      "A Agência de Turismo MERO é especializada em passeios náuticos e experiências inesquecíveis no mar, com foco no Passeio Panorâmico pela Costa em Angra dos Reis.",
    about_p2:
      "Nosso objetivo é oferecer conforto, segurança e atendimento personalizado, para que cada grupo aproveite o dia no mar com tranquilidade, boas fotos e lembranças marcantes.",

    about_highlight1_title: "Segurança em primeiro lugar",
    about_highlight1_text:
      "Embarcação com equipamentos de segurança e tripulação preparada para conduzir o passeio com responsabilidade.",
    about_highlight2_title: "Tripulação experiente",
    about_highlight2_text:
      "Profissionais que conhecem bem a região, as melhores paradas e os pontos mais indicados para fotos e banho.",
    about_highlight3_title: "Experiência personalizada",
    about_highlight3_text:
      "Possibilidade de ajustar detalhes do passeio conforme a necessidade do grupo, de acordo com a disponibilidade do dia.",

    contact_title: "Entre em Contato",
    contact_intro:
      "Fale com a equipe da Agência de Turismo MERO para tirar dúvidas, consultar datas disponíveis e receber uma proposta para o seu grupo.",
    contact_channels_title: "Canais de atendimento",
    contact_whatsapp: "(24) 9325-6372",
    contact_phone: "(24) 9325-6372",
    contact_instagram: "@mero_turismo",
    contact_note:
      "Horário de atendimento: diariamente, das 08h às 18h (horários sujeitos à alteração conforme a operação dos passeios).",
    contact_book_title: "Reserve seu passeio",
    contact_book_text:
      "Clique no botão abaixo para iniciar uma conversa direta pelo WhatsApp e informar a data desejada, número de pessoas e detalhes do seu grupo.",

    whatsapp_cta: "Falar no WhatsApp",
    whatsapp_cta_full: "Falar com a Agência MERO no WhatsApp",
  },

  en: {
    logo_text: "",
    nav_home: "Home",
    nav_tours: "Tour",
    nav_gallery: "Gallery",
    nav_about: "About",
    nav_contact: "Contact",

    hero_title: "Welcome to MERO Tourism Agency",
    hero_subtitle:
      
    hero_cta: "Discover the Panoramic Tour",

    tours_title: "Panoramic Coast Tour",
    tours_subtitle:
      "A unique route along the coast of Angra dos Reis, ideal for families, groups of friends and special events, with smooth sailing, natural landscapes and perfect stops for photos and swimming.",

    tour1_title: "Panoramic Coast Tour",
    tour1_duration: "Duration: 5h",
    tour1_schedule: "Morning or afternoon departures",
    tour1_capacity: "Capacity: up to 89 people",
    tour1_description:
      "Smooth navigation along the coast, with privileged views of coves, islands and beaches in the region, designed for those who want to relax, take photos and enjoy the sea safely.",
    tour1_stops_title: "Main stops",
    tour1_stop1:
      "Coves and beaches selected according to the weather and sea conditions.",
    tour1_stop2:
      "Strategic spots for swimming in calm and pleasant waters.",
    tour1_stop3:
      "Moments for photos of the boat, the landscape and the group during the tour.",
    tour1_included_title: "Included in the tour",
    tour1_included1: "Boat with experienced crew.",
    tour1_included2: "Fuel for the entire route.",
    tour1_included3: "Safety equipment on board.",
    tour1_not_included_title: "Not included",
    tour1_not_included1: "Food.",
    tour1_not_included2: "Alcoholic beverages.",
    tour1_price:
      "Prices on request · Contact MERO to receive a quote for your group.",

    gallery_title: "Gallery",
    gallery_subtitle: "See a little of the tour and the Mero boat in action.",
    gallery_item1: "Mero boat sailing",
    gallery_item2: "Stop for photos and swimming",
    gallery_item3: "Families and groups on board",
    gallery_item4: "Sunset in the bay",
    gallery_item5: "Beaches and coves in the region",
    gallery_item6: "Details of the Mero boat",

    about_title: "About MERO Tourism Agency",
    about_p1:
      "MERO Tourism Agency is specialized in boat tours and unforgettable experiences at sea, focusing on the Panoramic Coast Tour in Angra dos Reis.",
    about_p2:
      "Our goal is to offer comfort, safety and personalized service, so that each group enjoys the day at sea with peace of mind, great photos and lasting memories.",

    about_highlight1_title: "Safety first",
    about_highlight1_text:
      "Boat with safety equipment and crew prepared to conduct the tour responsibly.",
    about_highlight2_title: "Experienced crew",
    about_highlight2_text:
      "Professionals who know the region well, the best stops and the most suitable spots for photos and swimming.",
    about_highlight3_title: "Personalized experience",
    about_highlight3_text:
      "Possibility to adjust details of the tour according to the group's needs, subject to availability.",

    contact_title: "Contact us",
    contact_intro:
      "Talk to MERO Tourism Agency to ask questions, check available dates and receive a proposal for your group.",
    contact_channels_title: "Contact channels",
    contact_whatsapp: "+55 (24) 9325-6372",
    contact_phone: "+55 (24) 9325-6372",
    contact_instagram: "@mero_turismo",
    contact_note:
      "Service hours: daily, from 8 a.m. to 6 p.m. (subject to change according to tour operation).",
    contact_book_title: "Book your tour",
    contact_book_text:
      "Click the button below to start a WhatsApp conversation and inform the desired date, number of people and group details.",

    whatsapp_cta: "Chat on WhatsApp",
    whatsapp_cta_full: "Talk to MERO Agency on WhatsApp",
  },
};

// ===== Função de idioma =====
function setLanguage(lang) {
  const elements = document.querySelectorAll("[data-i18n]");
  elements.forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
  localStorage.setItem("mero_lang", lang);
  document.documentElement.lang = lang === "pt" ? "pt-BR" : "en";
}

// ===== Tema (white / ocean) =====
function setTheme(theme) {
  const body = document.body;
  body.classList.remove("theme-default", "theme-ocean");
  body.classList.add(`theme-${theme}`);
  localStorage.setItem("meroTheme", theme);
}

// ===== Inicialização (idioma + galeria + tema) =====
document.addEventListener("DOMContentLoaded", () => {
  console.log("DOMContentLoaded MERO");

  // ----- Idioma -----
  const savedLang = localStorage.getItem("mero_lang") || "pt";
  setLanguage(savedLang);

  const langButtons = document.querySelectorAll(
    ".language-switcher [data-lang]"
  );
  langButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.getAttribute("data-lang");
      setLanguage(lang);
    });
  });

  // ----- Galeria com paginação 6x6 -----
  const galleryGrid = document.getElementById("galleryGrid");
  if (galleryGrid) {
    const items = Array.from(galleryGrid.querySelectorAll(".gallery-item"));
    const prevBtn = document.querySelector(".gallery-prev");
    const nextBtn = document.querySelector(".gallery-next");

    const pageSize = 6;
    let currentPage = 0;
    const totalPages = Math.ceil(items.length / pageSize);

    function renderPage(page) {
      items.forEach((item, index) => {
        const start = page * pageSize;
        const end = start + pageSize;
        if (index >= start && index < end) {
          item.style.display = "";
        } else {
          item.style.display = "none";
        }
      });

      if (prevBtn) prevBtn.disabled = page === 0;
      if (nextBtn) nextBtn.disabled = page === totalPages - 1;
    }

    if (prevBtn) {
      prevBtn.addEventListener("click", () => {
        if (currentPage > 0) {
          currentPage -= 1;
          renderPage(currentPage);
        }
      });
    }

    if (nextBtn) {
      nextBtn.addEventListener("click", () => {
        if (currentPage < totalPages - 1) {
          currentPage += 1;
          renderPage(currentPage);
        }
      });
    }

    renderPage(currentPage);
  }

  // ----- Tema (white / ocean) -----
  const savedTheme = localStorage.getItem("meroTheme") || "default";
  setTheme(savedTheme);

  const themeButtons = document.querySelectorAll(".theme-switcher button");
  themeButtons.forEach((btn) => {
    btn.addEventListener("click", () => {
      const theme = btn.getAttribute("data-theme");
      setTheme(theme);
    });
  });

  // ----- Lightbox da galeria -----
  const lightboxModal = document.getElementById("lightboxModal");
  const lightboxImage = document.getElementById("lightboxImage");
  const lightboxCaption = document.getElementById("lightboxCaption");
  const lightboxClose = document.querySelector(".lightbox-close");

  if (lightboxModal && lightboxImage && lightboxCaption) {
    console.log("Lightbox pronto");
    const galleryImages = document.querySelectorAll(".gallery-item img");
    console.log("Qtd imagens na galeria:", galleryImages.length);

    galleryImages.forEach((img, index) => {
      console.log("Registrando clique na imagem", index);
      img.addEventListener("click", () => {
        console.log("Clique na imagem", index);
        const figure = img.closest(".gallery-item");
        const captionEl = figure.querySelector(".gallery-text");

        lightboxImage.src = img.src;
        lightboxImage.alt = img.alt || "";
        lightboxCaption.textContent = captionEl ? captionEl.textContent : "";
        lightboxModal.classList.add("open");
        lightboxModal.setAttribute("aria-hidden", "false");
      });
    });

    lightboxClose.addEventListener("click", () => {
      lightboxModal.classList.remove("open");
      lightboxModal.setAttribute("aria-hidden", "true");
    });

    lightboxModal.addEventListener("click", (e) => {
      if (e.target === lightboxModal) {
        lightboxModal.classList.remove("open");
        lightboxModal.setAttribute("aria-hidden", "true");
      }
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && lightboxModal.classList.contains("open")) {
        lightboxModal.classList.remove("open");
        lightboxModal.setAttribute("aria-hidden", "true");
      }
    });
  }

  console.log("MERO site - main.js ready!");
});
